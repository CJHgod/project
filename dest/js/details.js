"use strict";function sendAjax(n,i,c){return new Promise(function(a,t){$.ajax({url:i,type:n,data:c,dataType:"json",success:function(t){a(t)}})})}$(function(){var t=window.location.search.slice(1).split("&"),s={};t.forEach(function(t){var a=t.split("=");s[a[0]]=a[1]}),sendAjax("get","../json/indexData.json").then(function(t){var e=t[s.id-1];$(".currentImgBox .nowCurrentImg img").attr("src",e.imgData[0]),$(".currentImgBox .bigImgBox").css("background-image","url('".concat(e.imgData[0],"')"));var a=e.imgData.slice(0,5).map(function(t){return' <div class="min-imgBox">\n                        <img src="'.concat(t,'" alt="" data-bigImg="">\n                    </div>')}).join("");$(".readyImgBox").html(a),$(".readyImgBox .min-imgBox").eq(0).addClass("minImgBox-active"),$(".readyImgBox").on("click",".min-imgBox",function(){var t=$(this).find("img").attr("src");$(this).addClass("minImgBox-active").siblings().removeClass("minImgBox-active"),$(".currentImgBox .nowCurrentImg img").attr("src",t),$(".currentImgBox .bigImgBox").css("background-image","url('".concat(t,"')"))});var n=e.imgData.map(function(t){return'  <div class="imgBox"> <img src="'.concat(t,'" alt=""></div>')}).join("");$("#showImgBox").html(n),$(".jp-name").text(e.indexData.name),$(".china-name").text(e.indexData.chinaName),$(".price .context").text(e.indexData.price);var i=e.indexData.attribute.map(function(t){return' <div class="labelBox">'.concat(t,"</div>")}).join("");$(".shop-label").html(i);var c=e.detailsData.map(function(i){if("[object Array]"!=Object.prototype.toString.call(i.text))return'<li>\n                                     <div class="infos">'.concat(i.title,':</div>\n                                    <div class="context">').concat(i.text,"</div>\n                                 </li>");var t=i.text.map(function(t,a){var n="";return a<i.text.length-1&&(n=" <span>„ÄÅ</span>"),' <a href="">'.concat(t,"</a>\n                                        ").concat(n,"\n                                     ")}).join("");return' <li>\n                                    <div class="infos">'.concat(i.title,':</div>\n                                    <div class="context">\n                                     ').concat(t,"\n                                    </div>\n                                </li>")}).join("");$(".details-text ul").html(c),$(".addCart").click(function(){var t=e.imgData[0],a=e.indexData.id,n=e.indexData.name,i=e.indexData.price,c=$(".shop-num .context input").val();$.ajax({url:"/addcart",data:{shopsID:a,shopName:n,price:i,img:t,totalnum:c},dataType:"json",success:function(t){}}),$.ajax({url:"/selectcart",dataType:"json",success:function(t){$(".cartBuy .numBox").text(t.length)}})}),$(".nowBuyBtn").click(function(){$(".addCart").trigger("click"),$.ajax({url:"/selectcart",dataType:"json",success:function(t){$(".cartBuy .numBox").text(t.length)}}),window.location.href="../html/cartpage.html"})});var g=$(".currentImgBox .maskBox"),i=$(".currentImgBox"),x=$(".currentImgBox .bigImgBox");i.mouseenter(function(){g.css({display:"block"}),x.css({display:"block"});var e=g.width(),s=g.height(),t=window.getComputedStyle(x[0])["background-size"].split(" "),o=parseInt(t[0]),r=parseInt(t[1]),l=i.width(),d=i.height(),a=e*o/l,n=s*r/d;x.css({width:a,height:n});var m=i.offset().left,u=i.offset().top;$(this).mousemove(function(t){var a=t.pageX-m-e/2,n=t.pageY-u-s/2;a<=0&&(a=0),n<=0&&(n=0),l-e<=a&&(a=l-e),d-s<=n&&(n=d-s),g.css({left:a,top:n});var i=o*a/l,c=r*n/d;x.css({backgroundPosition:"-".concat(i,"px -").concat(c,"px")})})}),i.mouseleave(function(){g.css({display:"none"}),x.css({display:"none"})});var a=$(".shop-num .context input"),n=1;$(".shop-num .reduce").click(function(){n--,a.val(n)}),a.change(function(){n=$(this).val()}),$(".shop-num .add").click(function(){n++,a.val(n)}),$(".details-title .details-img").click(function(){$(this).addClass("details-active").siblings().removeClass("details-active "),$("#showImgBox").css({display:"block"}),$(".details-text").css({display:"none"})}),$(".details-title .details-data").click(function(){$(this).addClass("details-active").siblings().removeClass("details-active "),$("#showImgBox").css({display:"none"}),$(".details-text").css({display:"block"})})});