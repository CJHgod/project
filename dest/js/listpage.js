"use strict";$(function(){var t=window.location.search.slice(1).split("&"),i={};function e(t){return t.map(function(t){return'<div class="shopBox" data-id="'.concat(t.id,'">\n                        <div class="imgBox">\n                            <img src="').concat(t.img,'" alt="">\n                        </div>\n                        <div class="shop-context">\n                            <div class="price">').concat(t.price,' </div>\n                            <div class="shop-name">').concat(t.name,'</div>\n                            <div class="shopState"> 现货 </div>\n                        </div>\n                    </div>')}).join("")}t.forEach(function(t){var s=t.split("=");i[s[0]]=s[1]}),$.ajax({type:"get",url:"../json/listpage.json",dataType:"json",success:function(c){var a=JSON.parse(JSON.stringify(c.listdata)),s=a.slice(0,12),t=e(s);function n(n){$(".m-style").pagination({totalData:c.totalData,showData:12,coping:!0,callback:function(t){var s=t.getCurrent(),i=(s-1)*this.showData,o=s*this.showData,a=e(n.slice(i,o));$(".shop-list").html(a),l(),$(window).scrollTop(0)}})}function l(){var i=!0,o=0,a=12;window.onscroll=function(){var t=window.innerHeight,s=$(".shop-list .shopBox").last()[0].offsetTop;s<t+$(window).scrollTop()&&i&&a<c.totalData&&($(window).scrollTop(s),$(".loadBox").fadeIn(1e3),i=!1,o+=12,a+=12,setTimeout(function(){$.ajax({type:"get",url:"../json/listpage.json",dataType:"json",success:function(t){var s=e(t.listdata.slice(o,a));$(".shop-list")[0].innerHTML+=s,i=!0,$(".loadBox").fadeOut(300)}})},1e3))}}$(".shop-list").html(t),$("#upPrice").click(function(){$(this).addClass("oBox-active").siblings().removeClass("oBox-active");var i,t=a.sort((i="price",function(t,s){return parseInt(t[i])-parseInt(s[i])}));n(t);var s=e(t.slice(0,12));$(".shop-list").html(s)}),$("#downPrice").click(function(){$(this).addClass("oBox-active").siblings().removeClass("oBox-active");var o,t=a.sort((o="price",function(t,s){var i=parseInt(t[o]);return parseInt(s[o])-i}));n(t);var s=e(t.slice(0,12));$(".shop-list").html(s)}),$("#o-default").click(function(){$(this).addClass("oBox-active").siblings().removeClass("oBox-active"),n(c.listdata);var t=e(s);$(".shop-list").html(t)}),n(c.listdata),l(),$(".shop-list").on("click",".shopBox",function(){var t=$(this).data("id");window.location.href="./details.html?id=".concat(t)})}})});